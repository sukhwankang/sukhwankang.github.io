---
layout: post
title: UVM code
date: 2025-01-08
description: UVM coding with SystemVerilog
tags: UVM SystemVerilog
categories: sample-posts
featured: true
---

This theme implements a built-in Jekyll feature, the use of Rouge, for syntax highlighting.
It supports more than 100 languages.
This example is in C++.
All you have to do is wrap your code in markdown code tags:


````markdown
```systemverilog
class env extends uvm_env;

  virtual add_sub_if m_if;

  function new(string name, uvm_component parent = null);
    super.new(name, parent);
  endfunction
  
  function void connect_phase(uvm_phase phase);
    `uvm_info("LABEL", "Started connect phase.", UVM_HIGH);
    // Get the interface from the resource database.
    assert(uvm_resource_db#(virtual add_sub_if)::read_by_name(
      get_full_name(), "add_sub_if", m_if));
    `uvm_info("LABEL", "Finished connect phase.", UVM_HIGH);
  endfunction: connect_phase

  task run_phase(uvm_phase phase);
    phase.raise_objection(this);
    `uvm_info("LABEL", "Started run phase.", UVM_HIGH);
    begin
      int a = 8'h2, b = 8'h3;
      parameter int LOOP_COUNT = 10;
      for(int LOOP_COUNT=0;LOOP_COUNT<10;LOOP_COUNT++) begin
      @(m_if.cb);
      m_if.cb.a <= a;
      m_if.cb.b <= b;
      m_if.cb.doAdd <= 1'b1;
        repeat(2) @(m_if.cb);
        `uvm_info("RESULT", $sformatf("%0d + %0d = %0d", 
         a, b, m_if.cb.result), UVM_LOW);
        assert(m_if.cb.result == (a + b))
        else `uvm_error("RESULT_ERR", "Addition result mismatch!");
      a=a+1;
      b=b+1;
      `uvm_info("CHANGE", $sformatf("a=%0d, b=%0d", a, b), UVM_LOW);
    end
    end
    `uvm_info("LABEL", "Finished run phase.", UVM_HIGH);
    phase.drop_objection(this);
  endtask: run_phase
  
endclass
```
````

The keyword `linenos` triggers display of line numbers.
Produces something like this:


{% highlight systemverilog linenos %}

class env extends uvm_env;

  virtual add_sub_if m_if;

  function new(string name, uvm_component parent = null);
    super.new(name, parent);
  endfunction
  
  function void connect_phase(uvm_phase phase);
    `uvm_info("LABEL", "Started connect phase.", UVM_HIGH);
    // Get the interface from the resource database.
    assert(uvm_resource_db#(virtual add_sub_if)::read_by_name(
      get_full_name(), "add_sub_if", m_if));
    `uvm_info("LABEL", "Finished connect phase.", UVM_HIGH);
  endfunction: connect_phase

  task run_phase(uvm_phase phase);
    phase.raise_objection(this);
    `uvm_info("LABEL", "Started run phase.", UVM_HIGH);
    begin
      int a = 8'h2, b = 8'h3;
      parameter int LOOP_COUNT = 10;
      for(int LOOP_COUNT=0;LOOP_COUNT<10;LOOP_COUNT++) begin
      @(m_if.cb);
      m_if.cb.a <= a;
      m_if.cb.b <= b;
      m_if.cb.doAdd <= 1'b1;
        repeat(2) @(m_if.cb);
        `uvm_info("RESULT", $sformatf("%0d + %0d = %0d", 
         a, b, m_if.cb.result), UVM_LOW);
        assert(m_if.cb.result == (a + b))
        else `uvm_error("RESULT_ERR", "Addition result mismatch!");
      a=a+1;
      b=b+1;
      `uvm_info("CHANGE", $sformatf("a=%0d, b=%0d", a, b), UVM_LOW);
    end
    end
    `uvm_info("LABEL", "Finished run phase.", UVM_HIGH);
    phase.drop_objection(this);
  endtask: run_phase
  
endclass

{% endhighlight %}

For displaying code in a list item, you have to be aware of the indentation, as stated in this [Stackoverflow answer](https://stackoverflow.com/questions/34987908/embed-a-code-block-in-a-list-item-with-proper-indentation-in-kramdown/38090598#38090598). You must indent your code by **(3 \* bullet_indent_level)** spaces. This is because kramdown (the markdown engine used by Jekyll) indentation for the code block in lists is determined by the column number of the first non-space character after the list item marker. For example:

